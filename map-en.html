<!doctype html>
<html lang="en">
<head>
 
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex,nofollow">

  <style>
    :root{
  --bg0:#020815;
  --bg1:#03121c;
  --bg2:#020612;

  --ink:rgba(255,255,255,.96);
  --ink2:rgba(255,255,255,.8);
  --muted:rgba(255,255,255,.68);

  --card:rgba(5,12,25,.94);
  --card-soft:rgba(9,20,40,.98);
  --border:rgba(148,227,255,.35);
  --border-soft:rgba(148,227,255,.18);
  --shadow:0 26px 80px rgba(0,0,0,.86);

  --accent:#22c1af;
  --accent-soft:rgba(34,193,175,.18);
  --accent-strong:#0ea5e9;
  --danger:#f97373;
  --danger-soft:rgba(248,113,113,.2);

  --radius:22px;
  --max-width:1040px;
}

body{
  margin:0;
  font-family:"Poppins",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
  color:var(--ink);
  background:
    radial-gradient(1200px 780px at 10% 0%, rgba(96,165,250,.22), transparent 60%),
    radial-gradient(980px 720px at 85% 6%, rgba(45,212,191,.18), transparent 62%),
    /* ztmaven√≠ dna ‚Äì zabije prou≈æek */
    radial-gradient(1200px 820px at 50% 120%, rgba(0,0,0,.7), transparent 65%),
    linear-gradient(180deg, var(--bg0) 0%, var(--bg1) 42%, var(--bg2) 100%);
  background-attachment: fixed;
}

    a{color:#bfdbfe}
    a:hover{color:#e0f2fe}

    .wrap{
      min-height:100vh;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding:24px 16px 40px;
    }

    .shell{
      width:min(100%, var(--max-width));
    }

    .topbar{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:16px;
      gap:12px;
      font-size:13px;
    }

    .backlink{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.45);
      text-decoration:none;
      color:#e5e7eb;
      background:rgba(15,23,42,.7);
    }
    .backlink:hover{
      border-color:#e5e7eb;
      background:rgba(15,23,42,.9);
    }

    .bonus-pill{
      padding:6px 10px;
      border-radius:999px;
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.08em;
      border:1px dashed rgba(249,250,251,.5);
      background:linear-gradient(90deg,rgba(34,197,235,.2),rgba(45,212,191,.08));
      color:#e0f2fe;
      display:flex;
      align-items:center;
      gap:6px;
    }

    main.card{
      background:var(--card);
      border-radius:24px;
      border:1px solid var(--border-soft);
      box-shadow:var(--shadow);
      padding:22px 20px 24px;
      position:relative;
      overflow:hidden;
    }

    header.hero{
      margin-bottom:18px;
    }
    header.hero h1{
      font-family:"Cinzel",serif;
      font-size:1.6rem;
      letter-spacing:.03em;
      margin:0 0 6px;
      display:flex;
      align-items:baseline;
      gap:8px;
    }
    header.hero h1 span.emoji{
      font-size:1.4rem;
    }

    .hero-sub{
      margin:0 0 10px;
      font-size:.96rem;
      color:var(--ink2);
      max-width:60ch;
    }

    .plan-strip{
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      gap:8px;
      font-size:12px;
      color:var(--muted);
      margin-bottom:6px;
    }

    .plan-chip{
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(148,227,255,.5);
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.08em;
      background:rgba(15,23,42,.9);
      color:#e5e7eb;
    }

    .plan-hint{
      font-size:12px;
      color:var(--muted);
    }

    .map-locked{
      margin-top:6px;
      padding:8px 10px;
      border-radius:14px;
      border:1px dashed var(--danger-soft);
      background:rgba(15,23,42,.92);
      font-size:12.5px;
      color:#fecaca;
    }

    .layout{
      display:grid;
      grid-template-columns:minmax(0, 320px) minmax(0, 1fr);
      gap:22px;
      margin-top:10px;
      align-items:flex-start;
    }

    .map-figure{
      background:var(--card-soft);
      border-radius:20px;
      border:1px solid rgba(148,227,255,.26);
      overflow:hidden;
      position:relative;
    }

    .map-figure img{
      width:100%;
      display:block;
      object-fit:cover;
    }

    .map-caption{
      padding:8px 10px 10px;
      font-size:12px;
      color:var(--muted);
      background:linear-gradient(180deg,rgba(15,23,42,.9),rgba(15,23,42,1));
    }

    .map-tag{
      position:absolute;
      top:10px;
      left:10px;
      padding:4px 8px;
      border-radius:999px;
      font-size:11px;
      background:rgba(15,23,42,.8);
      border:1px solid rgba(148,227,255,.6);
      color:#e0f2fe;
    }

    .right{
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    .card-block{
      background:radial-gradient(900px 600px at 0 0,rgba(56,189,248,.22),transparent 60%),
                 radial-gradient(820px 560px at 100% 0,rgba(45,212,191,.18),transparent 62%),
                 rgba(6,14,32,.96);
      border-radius:18px;
      padding:12px 12px 14px;
      border:1px solid rgba(148,227,255,.28);
    }

    .card-block h2{
      font-size:1rem;
      margin:0 0 4px;
    }
    .card-block p{
      margin:0 0 8px;
      font-size:13px;
      color:var(--ink2);
    }

    .trip-types{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin:6px 0 8px;
    }

    .chip-option{
      border-radius:999px;
      padding:4px 10px;
      font-size:12px;
      border:1px solid rgba(148,227,255,.35);
      background:rgba(15,23,42,.85);
      color:#e5e7eb;
      cursor:pointer;
    }
    .chip-option.active{
      background:var(--accent-soft);
      border-color:var(--accent);
      color:#e0f2fe;
    }

    .trip-form{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      align-items:flex-end;
      margin-bottom:4px;
    }

    .field-inline{
      margin-top: 10px;
    }

    .save-btn{
      border: none;
      outline: none;
      cursor: pointer;

      border-radius: 999px;
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 500;

      background: #111827;
      color: #fff;
      box-shadow: 0 6px 18px rgba(15, 23, 42, .25);
      transition: transform .08s ease, box-shadow .08s ease, background .12s ease;
    }

    .save-btn:hover{
      background: #020617;
      box-shadow: 0 8px 22px rgba(15, 23, 42, .3);
      transform: translateY(-1px);
    }

    .save-btn:active{
      transform: translateY(0);
      box-shadow: 0 3px 10px rgba(15, 23, 42, .2);
    }

    .save-hint{
      font-size: 12px;
      color: #4b5563;
      margin-top: 4px;
    }

    .save-hint.ok{
      color: #047857;
    }

    .save-hint.error{
      color: #b91c1c;
    }

    .field{
      display:flex;
      flex-direction:column;
      gap:3px;
      font-size:12px;
      min-width:120px;
      flex:1 1 140px;
    }
    .field label{
      color:var(--muted);
    }
    .field input{
      border-radius:10px;
      border:1px solid rgba(148,227,255,.45);
      background:rgba(15,23,42,.9);
      color:#e5e7eb;
      padding:5px 8px;
      font-size:13px;
    }

    .trip-note{
      font-size:12px;
      color:var(--muted);
      margin-top:4px;
    }

    .checklist{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
      gap:10px;
      margin-top:4px;
      font-size:13px;
    }

    .checklist-group{
      background:rgba(15,23,42,.96);
      border-radius:14px;
      padding:8px 10px 10px;
      border:1px solid rgba(148,227,255,.16);
    }

    .checklist-group h3{
      margin:0 0 4px;
      font-size:12.5px;
      text-transform:uppercase;
      letter-spacing:.06em;
      color:#bae6fd;
    }

    .item{
      display:flex;
      align-items:flex-start;
      gap:6px;
      margin:2px 0;
    }

    .item input[type="checkbox"]{
      margin-top:2px;
      accent-color:var(--accent);
    }

    .item label{
      font-size:12.5px;
      color:var(--ink2);
    }

    .status-strip{
      margin-top:6px;
      font-size:12.5px;
      color:#bbf7d0;
      padding:6px 8px;
      border-radius:999px;
      background:rgba(22,163,74,.12);
      border:1px solid rgba(22,163,74,.35);
      display:flex;
      align-items:center;
      gap:6px;
    }

    .status-strip span.badge{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.08em;
      border-radius:999px;
      padding:3px 8px;
      background:rgba(21,128,61,.85);
      color:#ecfdf5;
    }

    .tiny{
      margin-top:8px;
      font-size:11.5px;
      color:var(--muted);
    }

    .pseudo-input{
      width:100%;
      text-align:left;
      border-radius:10px;
      border:1px solid rgba(148,227,255,.45);
      background:rgba(15,23,42,.9);
      color:#e5e7eb;
      padding:6px 9px;
      font-size:13px;
      cursor:pointer;
    }

    .mini-calendar,
    .mini-times{
      margin-top:6px;
      border-radius:12px;
      border:1px solid rgba(148,227,255,.26);
      background:rgba(15,23,42,.96);
      padding:6px 8px 8px;
      font-size:11px;
      max-width:240px;
    }

    .mini-calendar-head,
    .mini-times-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      font-weight:500;
      color:#e0f2fe;
      margin-bottom:4px;
      gap:4px;
    }

    .mini-calendar-head span{
      flex:1;
      text-align:center;
      font-size:11.5px;
    }

    .cal-nav{
      border:none;
      background:transparent;
      color:#9ca3af;
      font-size:13px;
      padding:0 4px;
      cursor:pointer;
    }

    .mini-calendar-grid{
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:2px;
    }

    .mini-calendar-grid button{
      border:none;
      border-radius:7px;
      padding:3px 0;
      font-size:10px;
      background:rgba(15,23,42,.9);
      color:#9ca3af;
      cursor:pointer;
    }

    .mini-cal-dayhead{
      background:transparent !important;
      color:#9ca3af !important;
      font-weight:600;
      cursor:default;
    }

    .mini-cal-empty{
      background:transparent;
      border:none;
    }

    .mini-calendar-grid button.is-day{
      color:#e5e7eb;
    }

    .mini-calendar-grid button.today{
      border:1px solid var(--accent);
    }

    .mini-calendar-grid button.selected{
      background:var(--accent-soft);
      color:#e0f2fe;
      border-color:var(--accent-strong);
    }

    .time-chips{
      display:flex;
      flex-wrap:wrap;
      gap:5px;
      margin-top:2px;
    }

    .time-chips button{
      border-radius:999px;
      border:1px solid rgba(148,227,255,.35);
      background:rgba(15,23,42,.9);
      color:#e5e7eb;
      font-size:11px;
      padding:3px 8px;
      cursor:pointer;
    }

    .time-chips button.active{
      background:var(--accent-soft);
      border-color:var(--accent);
      color:#e0f2fe;
    }

    .card.locked{
      position:relative;
    }
    .card.locked::after{
      content:"PREMIUM bonus ‚Äì in the demo only a preview. Real templates and saving will come in the live version.";
      position:absolute;
      inset:auto 12px 10px 12px;
      border-radius:14px;
      padding:6px 9px;
      font-size:11px;
      text-align:center;
      background:linear-gradient(90deg,rgba(15,23,42,.96),rgba(39,39,42,.96));
      color:#fbbf24;
      border:1px dashed rgba(251,191,36,.7);
    }

    .card.locked .card-block,
    .card.locked .map-figure{
      opacity:.55;
      pointer-events:none;
    }

    @media (max-width:840px){
      .layout{
        grid-template-columns:1fr;
      }
    }

    @media (max-width:640px){
      main.card{
        padding:18px 14px 22px;
      }
    }
  </style>
</head>

<body>
<div class="wrap">
  <div class="shell">
    <div class="topbar">
      <a class="backlink" href="proiecta-projekty-en.html">
        <span>‚¨ÖÔ∏é</span>
        <span>Back</span>
      </a>
      <div class="bonus-pill">
        <span>üéä Bonus room</span>
        <span>Journey map</span>
      </div>
    </div>

    <main class="card" id="mapCard">
      <header class="hero">
        <h1><span class="emoji">üó∫Ô∏è</span><span>Journey map ‚Ä¢ travel command room</span></h1>
        <p class="hero-sub">
          A room for moments when you leave home ‚Äì for holidays, trips, doctors or work meetings ‚Äì
          and you don‚Äôt want to stand in the doorway with one sock on, an empty wallet and a racing heart.
        </p>

        <div class="plan-strip">
          <span id="mapPlanChip" class="plan-chip">DEMO ¬∑ FREE plan</span>
          <span id="mapPlanHint" class="plan-hint">
            In DEMO mode you can try the packing checklist and the feel of the room. The full version unlocks in the PREMIUM plan.
          </span>
        </div>

        <div id="mapLockedInfo" class="map-locked" hidden>
          This is a <strong>PREMIUM bonus</strong>. In the demo you can only try it,
          real journey saving and smart templates will arrive in the live version.
        </div>
      </header>

      <section class="layout" aria-label="Journey map and packing checklist">
        <figure class="map-figure">
          <div class="map-tag">Sample journey map</div>
          <img src="map.png" alt="Illustration of a city map with river, forest and paths ‚Äì a playful view of planning journeys." />
          <figcaption class="map-caption">
            Every journey has its direction: home, route, destination and safe return.
            In the full version this will one day show your own paths.
          </figcaption>
        </figure>

        <div class="right">
          <section class="card-block" aria-labelledby="tripTypeHeading">
            <h2 id="tripTypeHeading">1 ‚Ä¢ What kind of journey is ahead?</h2>
            <p>
              Pick the type ‚Äì holiday, trip, doctor, work meeting or something completely your own.
              You‚Äôll get a different small sentence in your head for each.
            </p>

            <div class="trip-types" id="tripTypes">
              <button type="button" class="chip-option active" data-kind="dovolena">üèñ Holiday</button>
              <button type="button" class="chip-option" data-kind="vylet">üå≤ Day trip</button>
              <button type="button" class="chip-option" data-kind="doktor">ü©∫ Doctor</button>
              <button type="button" class="chip-option" data-kind="prace">üíº Work meeting</button>
              <button type="button" class="chip-option" data-kind="jine">‚ú® Something else</button>
            </div>

            <div class="trip-form">
              <div class="field">
                <label for="tripDateDisplay">Date</label>
                <button type="button" id="tripDateDisplay" class="pseudo-input">
                  Pick a day on the map ‚Üí
                </button>

                <div class="mini-calendar" aria-label="Select journey day">
                  <div class="mini-calendar-head">
                    <button type="button" class="cal-nav" id="calPrev" aria-label="Previous month">‚Äπ</button>
                    <span id="calMonthLabel">Month</span>
                    <button type="button" class="cal-nav" id="calNext" aria-label="Next month">‚Ä∫</button>
                  </div>
                  <div class="mini-calendar-grid" id="calGrid"></div>
                </div>
              </div>

              <div class="field">
                <label for="tripTimeDisplay">Departure time</label>
                <button type="button" id="tripTimeDisplay" class="pseudo-input">
                  Not set yet
                </button>

                <div class="mini-times" aria-label="Select approximate time">
                  <div class="mini-times-head">Choose an approximate time</div>
                  <div class="time-chips" id="timeChips">
                    <button type="button" data-time="Morning 7‚Äì10">üåÖ Morning</button>
                    <button type="button" data-time="Late morning 10‚Äì12">‚òÄÔ∏è Late morning</button>
                    <button type="button" data-time="Afternoon 13‚Äì17">üå§ Afternoon</button>
                    <button type="button" data-time="Evening 18‚Äì22">üåô Evening</button>
                    <button type="button" data-time="Anytime, when it feels right">‚ú® Anytime</button>
                  </div>
                </div>
              </div>

              <div class="field field-inline">
                <button type="button" id="btnSaveTrip" class="save-btn">
                  üíæ Save journey (DEMO)
                </button>
                <div class="save-hint" id="tripSaveHint">
                  Saves only in this browser ‚Äì for a calmer moment at the door.
                </div>
              </div>

              <div class="field">
                <label for="tripPlace">Where are you going</label>
                <input id="tripPlace" type="text" placeholder="e.g. Clinic / airport / city centre" />
              </div>
            </div>

            <div class="trip-note" id="tripNote">
              Holiday mode: your job is to arrive in one piece. Everything else is a bonus.
            </div>
          </section>

          <section class="card-block" aria-labelledby="checklistHeading">
            <h2 id="checklistHeading">2 ‚Ä¢ Packing checklist ‚Äì serious things in playful form</h2>
            <p>
              Tick what you‚Äôve prepared. This is not about performance, it‚Äôs about feeling calm at the door.
            </p>

            <div class="checklist" id="checklist">
              <div class="checklist-group">
                <h3>Documents & money</h3>
                <div class="item">
                  <input type="checkbox" id="item-id" data-label="ID / passport">
                  <label for="item-id">ID card / passport</label>
                </div>
                <div class="item">
                  <input type="checkbox" id="item-ins" data-label="Health insurance card / doctor card">
                  <label for="item-ins">Health insurance card / doctor card</label>
                </div>
                <div class="item">
                  <input type="checkbox" id="item-money" data-label="Wallet (cards + cash)">
                  <label for="item-money">Wallet (cards + some cash)</label>
                </div>
              </div>

              <div class="checklist-group">
                <h3>Body & health</h3>
                <div class="item">
                  <input type="checkbox" id="item-meds" data-label="Regular medication">
                  <label for="item-meds">Regular medication (the things you really need)</label>
                </div>
                <div class="item">
                  <input type="checkbox" id="item-water" data-label="Water / drink">
                  <label for="item-water">Water / drink for the way</label>
                </div>
                <div class="item">
                  <input type="checkbox" id="item-snack" data-label="Light snack">
                  <label for="item-snack">Light snack so you don‚Äôt almost faint from hunger</label>
                </div>
              </div>

              <div class="checklist-group">
                <h3>Tech</h3>
                <div class="item">
                  <input type="checkbox" id="item-phone" data-label="Phone">
                  <label for="item-phone">Phone (ideally charged üòÖ)</label>
                </div>
                <div class="item">
                  <input type="checkbox" id="item-charger" data-label="Charger / power bank">
                  <label for="item-charger">Charger / power bank</label>
                </div>
                <div class="item">
                  <input type="checkbox" id="item-docs" data-label="Important e-mails / documents in phone">
                  <label for="item-docs">Important e-mails / documents accessible on your phone</label>
                </div>
              </div>

              <div class="checklist-group">
                <h3>Home</h3>
                <div class="item">
                  <input type="checkbox" id="item-keys" data-label="Keys to flat / car">
                  <label for="item-keys">Keys to flat / car</label>
                </div>
                <div class="item">
                  <input type="checkbox" id="item-windows" data-label="Windows closed / cooker off">
                  <label for="item-windows">Windows, cooker, candles ‚Äì quick look and calm mind</label>
                </div>
                <div class="item">
                  <input type="checkbox" id="item-pet" data-label="Pet taken care of / feeding">
                  <label for="item-pet">Pet taken care of / food (if you‚Äôre away longer)</label>
                </div>
              </div>

              <div class="checklist-group">
                <h3>For the soul</h3>
                <div class="item">
                  <input type="checkbox" id="item-paper" data-label="Paper with address / important contact">
                  <label for="item-paper">Small paper with address / contact ‚Äûjust in case‚Äú</label>
                </div>
                <div class="item">
                  <input type="checkbox" id="item-comfort" data-label="Small talisman / tissue">
                  <label for="item-comfort">Small talisman / tissue ‚Äì something that soothes you</label>
                </div>
                <div class="item">
                  <input type="checkbox" id="item-note" data-label="Short calming sentence">
                  <label for="item-note">Short calming sentence in your head (‚ÄûI‚Äôm going prepared, the rest we‚Äôll adjust on the spot‚Äú)</label>
                </div>
              </div>
            </div>

            <div class="status-strip" id="statusStrip">
              <span class="badge">Journey status</span>
              <span id="statusText">Nothing ticked yet. That‚Äôs okay ‚Äì we‚Äôre only just starting to pack the bag.</span>
            </div>

            <p class="tiny">
              In the DEMO version your journey is saved only in this browser ‚Äì so you can prepare it in peace.
              The big palace memory and connection with Chronica / Sigma will come in the live version.
            </p>
          </section>
        </div>
      </section>
    </main>
  </div>
</div>

<script>
  (function(){
    // --- trip type selection ---
    const typeButtons = Array.from(document.querySelectorAll(".chip-option"));
    const noteEl = document.getElementById("tripNote");

    const notesByKind = {
      dovolena: "Holiday mode: your job is to arrive in one piece. Everything else is a bonus.",
      vylet: "Trip mode: the most important thing is to come back home pleasantly tired, not exhausted.",
      doktor: "Doctor mode: your job is to arrive on time and as calm as you can. The rest is on the doctors.",
      prace: "Work mode: your papers and arguments are ready. Now we just protect you from being thrown off along the way.",
      jine: "Special journey: it doesn‚Äôt have to be perfect. It only needs to be good enough and doable."
    };

    typeButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        typeButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        const kind = btn.getAttribute("data-kind");
        if(noteEl && notesByKind[kind]){
          noteEl.textContent = notesByKind[kind];
        }
      });
    });

    // --- checklist status ---
    const statusText = document.getElementById("statusText");
    const checkboxes = Array.from(document.querySelectorAll(".checklist input[type='checkbox']"));

    function updateStatus(){
      const total = checkboxes.length;
      let checked = 0;
      checkboxes.forEach(cb => { if(cb.checked) checked++; });

      if(!statusText) return;

      if(checked === 0){
        statusText.textContent = "Nothing ticked yet. That‚Äôs okay ‚Äì we‚Äôre only just starting to pack the bag.";
      }else if(checked < total / 2){
        statusText.textContent = `First steps done (${checked} of ${total}). There‚Äôs still plenty of time to add things without panic.`;
      }else if(checked < total){
        statusText.textContent = `You‚Äôre almost ready (${checked} of ${total}). Just a few details for peace of mind are left.`;
      }else{
        statusText.textContent = "Checklist is full. From now on it‚Äôs not about things ‚Äì just about remembering to breathe on the way.";
      }
    }

    checkboxes.forEach(cb => {
      cb.addEventListener("change", updateStatus);
    });
    updateStatus();

    // --- mini calendar + time selection ---
    const dateDisplay = document.getElementById("tripDateDisplay");
    const calGrid = document.getElementById("calGrid");
    const calMonthLabel = document.getElementById("calMonthLabel");
    const calPrev = document.getElementById("calPrev");
    const calNext = document.getElementById("calNext");
    const today = new Date();
    let calRef = new Date();

    function buildCalendar(){
      if(!calGrid || !calMonthLabel) return;
      calGrid.innerHTML = "";

      const year = calRef.getFullYear();
      const month = calRef.getMonth();
      const monthNames = ["January","February","March","April","May","June","July","August","September","October","November","December"];
      const dayNames = ["Mo","Tu","We","Th","Fr","Sa","Su"];

      calMonthLabel.textContent = `${monthNames[month]} ${year}`;

      dayNames.forEach(d => {
        const h = document.createElement("button");
        h.type = "button";
        h.textContent = d;
        h.className = "mini-cal-dayhead";
        h.disabled = true;
        calGrid.appendChild(h);
      });

      const first = new Date(year, month, 1);
      const startIdx = (first.getDay() + 6) % 7; // Monday = 0
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      const isThisMonth = year === today.getFullYear() && month === today.getMonth();
      const todayDate = today.getDate();

      for(let i = 0; i < startIdx; i++){
        const empty = document.createElement("button");
        empty.type = "button";
        empty.disabled = true;
        empty.className = "mini-cal-empty";
        calGrid.appendChild(empty);
      }

      for(let d = 1; d <= daysInMonth; d++){
        const btn = document.createElement("button");
        btn.type = "button";
        btn.textContent = String(d);
        btn.classList.add("is-day");
        if(isThisMonth && d === todayDate) btn.classList.add("today");
        btn.dataset.date = `${d}.${month+1}.${year}`;
        calGrid.appendChild(btn);
      }
    }

    function handleCalendarClick(e){
      const btn = e.target.closest("button.is-day");
      if(!btn || !calGrid) return;
      const all = calGrid.querySelectorAll("button.is-day");
      all.forEach(b => b.classList.remove("selected"));
      btn.classList.add("selected");
      const value = btn.dataset.date;
      if(dateDisplay && value){
        dateDisplay.textContent = value;
      }
    }

    if(calGrid){
      calGrid.addEventListener("click", handleCalendarClick);
      buildCalendar();
    }

    if(calPrev){
      calPrev.addEventListener("click", () => {
        calRef.setMonth(calRef.getMonth() - 1);
        buildCalendar();
      });
    }
    if(calNext){
      calNext.addEventListener("click", () => {
        calRef.setMonth(calRef.getMonth() + 1);
        buildCalendar();
      });
    }

    const timeDisplay = document.getElementById("tripTimeDisplay");
    const timeChips = Array.from(document.querySelectorAll("#timeChips button"));

    timeChips.forEach(btn => {
      btn.addEventListener("click", () => {
        timeChips.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        const t = btn.getAttribute("data-time");
        if(timeDisplay && t){
          timeDisplay.textContent = t;
        }
      });
    });

    const TRIP_KEY = "LM_MAP_TRIP_DEMO_V1";

    const tripPlaceInput = document.getElementById("tripPlace");
    const saveBtn = document.getElementById("btnSaveTrip");
    const saveHint = document.getElementById("tripSaveHint");

    function currentKind(){
      const active = document.querySelector(".chip-option.active");
      return active ? (active.getAttribute("data-kind") || "jine") : "jine";
    }

    function collectChecklistState(){
      const state = {};
      checkboxes.forEach(cb => {
        const id = cb.id || cb.getAttribute("data-label") || "";
        if(!id) return;
        state[id] = !!cb.checked;
      });
      return state;
    }

    function applyChecklistState(data){
      if(!data) return;
      checkboxes.forEach(cb => {
        const id = cb.id || cb.getAttribute("data-label") || "";
        if(!id) return;
        cb.checked = !!data[id];
      });
      updateStatus();
    }

    function saveTrip(){
      if(!window.localStorage || !saveHint) return;

      const dateText = dateDisplay ? (dateDisplay.textContent || "").trim() : "";
      const timeText = timeDisplay ? (timeDisplay.textContent || "").trim() : "";
      const place = tripPlaceInput ? (tripPlaceInput.value || "").trim() : "";

      const payload = {
        kind: currentKind(),
        dateText,
        timeText,
        place,
        checklist: collectChecklistState(),
        savedAt: Date.now()
      };

      try{
        localStorage.setItem(TRIP_KEY, JSON.stringify(payload));
        saveHint.textContent = "Saved for this journey (in the demo only in this browser).";
        saveHint.classList.remove("error");
        saveHint.classList.add("ok");
      }catch(_){
        saveHint.textContent = "Saving didn‚Äôt work. Remember, this is still a demo, not a failure.";
        saveHint.classList.remove("ok");
        saveHint.classList.add("error");
      }
    }

    function loadTrip(){
      if(!window.localStorage) return;

      try{
        const raw = localStorage.getItem(TRIP_KEY);
        if(!raw) return;
        const data = JSON.parse(raw);
        if(!data || typeof data !== "object") return;

        if(data.kind && typeButtons.length){
          typeButtons.forEach(btn => {
            const k = btn.getAttribute("data-kind");
            btn.classList.toggle("active", k === data.kind);
          });
          if(noteEl && notesByKind[data.kind]){
            noteEl.textContent = notesByKind[data.kind];
          }
        }

        if(dateDisplay && data.dateText){
          dateDisplay.textContent = data.dateText;
        }
        if(timeDisplay && data.timeText){
          timeDisplay.textContent = data.timeText;
          timeChips.forEach(btn => {
            const t = btn.getAttribute("data-time");
            btn.classList.toggle("active", t === data.timeText);
          });
        }
        if(tripPlaceInput && typeof data.place === "string"){
          tripPlaceInput.value = data.place;
        }

        if(data.checklist){
          applyChecklistState(data.checklist);
        }
      }catch(_){
        // ignore ‚Äì demo only
      }
    }

    if(saveBtn){
      saveBtn.addEventListener("click", saveTrip);
    }

    loadTrip();

    // --- plan from localStorage ---
    const chip = document.getElementById("mapPlanChip");
    const hint = document.getElementById("mapPlanHint");
    const lockedInfo = document.getElementById("mapLockedInfo");
    const card = document.getElementById("mapCard");

    let plan = "FREE";
    try{
      const raw = localStorage.getItem("lm_plan");
      if(raw){
        const up = String(raw).toUpperCase();
        if(["FREE","PLUS","PREMIUM"].includes(up)){
          plan = up;
        }
      }
    }catch(_){}

    if(chip){
      if(plan === "PREMIUM"){
        chip.textContent = "DEMO ¬∑ PREMIUM plan";
      }else if(plan === "PLUS"){
        chip.textContent = "DEMO ¬∑ PLUS plan";
      }else{
        chip.textContent = "DEMO ¬∑ FREE plan";
      }
    }

    if(hint){
      if(plan === "PREMIUM"){
        hint.textContent = "PREMIUM: in the live version this travel command room will save into memory. Here we only train the feeling of calm.";
      }else if(plan === "PLUS"){
        hint.textContent = "PLUS: you have extended options in Proiecta. The full travel command room with saved journeys unlocks in the PREMIUM plan.";
      }else{
        hint.textContent = "FREE: a preview of how a packing checklist and mental prep can look. The full version belongs to higher plans.";
      }
    }

    if(plan !== "PREMIUM"){
      if(lockedInfo) lockedInfo.hidden = false;
      if(card) card.classList.add("locked");
    }
  })();
</script>
</body>
</html>