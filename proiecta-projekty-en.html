<!doctype html>
<html lang="en">
<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex,nofollow">

  <style>
    :root{
  /* sjednocen√° tmav≈°√≠ tyrkysov√° rodina */
  --bg0:#020814;
  --bg1:#03161d;
  --bg2:#020814;

  --ink:rgba(255,255,255,.94);
  --ink2:rgba(255,255,255,.78);
  --muted:rgba(255,255,255,.68);
  --muted2:rgba(255,255,255,.55);

  --border:rgba(148,227,255,.24);
  --border-soft:rgba(148,227,255,.16);
  --card:rgba(1,10,16,.88);
  --shadow:0 26px 80px rgba(0,0,0,.8);

  --accent:#2dd4bf;
  --accent-soft:rgba(45,212,191,.18);
  --accent-strong:#22c1af;
  --danger:#f97373;
  --danger-soft:rgba(248,113,113,.18);
  --demo:#eab308;
}

body{
  margin:0;
  font-family:"Poppins",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
  color:var(--ink);
  background:
    radial-gradient(1200px 820px at 10% 0%, rgba(56,189,248,.24), transparent 60%),
    radial-gradient(1000px 780px at 90% 8%, rgba(45,212,191,.18), transparent 60%),
    /* tmav√Ω spodek pro celou str√°nku */
    radial-gradient(1200px 840px at 50% 120%, rgba(0,0,0,.75), transparent 65%),
    linear-gradient(180deg, var(--bg0) 0%, var(--bg1) 42%, var(--bg2) 100%);
  background-attachment: fixed;
}

    a{color:inherit}

    /* Layout */
    .page{min-height:100vh;display:flex;flex-direction:column;}
    header{
      position:sticky;top:0;z-index:40;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      background:linear-gradient(180deg,rgba(1,9,15,.92),rgba(1,9,15,.6));
      border-bottom:1px solid rgba(148,227,255,.28);
    }
    .wrap{max-width:1120px;margin:0 auto;padding:14px 18px 22px;}

    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      gap:10px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .brand-logo{
      width:32px;
      height:32px;
      border-radius:12px;
      overflow:hidden;
      border:1px solid rgba(148,227,255,.4);
      box-shadow:0 8px 26px rgba(0,0,0,.7);
      background:
        radial-gradient(circle at 20% 0%, rgba(148,227,255,.55), transparent 55%),
        radial-gradient(circle at 80% 110%, rgba(94,234,212,.5), transparent 60%),
        #020617;
    }

    .brand-text b{
      font-family:"Cinzel",serif;
      letter-spacing:.12em;
      font-size:13px;
      text-transform:uppercase;
    }
    .brand-text small{
      display:block;
      font-size:11px;
      color:var(--muted);
    }

    .top-nav{
      display:flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      color:var(--muted2);
    }
    .top-nav a{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid transparent;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:6px;
      background:rgba(15,23,42,.4);
    }
    .top-nav a:hover{
      border-color:rgba(148,227,255,.4);
      background:rgba(15,23,42,.7);
    }

    main{flex:1}
    .hero{
      display:grid;
      grid-template-columns:minmax(0,1.5fr) minmax(0,1.1fr);
      gap:18px;
      margin-top:12px;
    }
    @media (max-width:880px){
      .hero{grid-template-columns:1fr;gap:16px;}
    }

    .hero-card{
      border-radius:22px;
      border:1px solid var(--border);
      background:linear-gradient(145deg,rgba(3,16,23,.94),rgba(15,23,42,.96));
      box-shadow:var(--shadow);
      padding:18px 18px 16px;
      position:relative;
      overflow:hidden;
    }
    .hero-kicker{
      font-size:11px;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:var(--muted2);
      margin-bottom:4px;
    }
    h1{
      font-family:"Cinzel",serif;
      font-size:clamp(18px,2.5vw,22px);
      letter-spacing:.14em;
      text-transform:uppercase;
      margin:0 0 6px;
    }
    .hero-lead{
      font-size:13px;
      line-height:1.6;
      color:var(--ink2);
      margin:0 0 10px;
    }
    .hero-note{
      font-size:12px;
      color:var(--muted);
      line-height:1.6;
      margin:0;
    }

    .demo-pill-row{
      margin-top:10px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      font-size:11px;
    }
    .demo-pill{
      padding:4px 8px;
      border-radius:999px;
      border:1px dashed rgba(234,179,8,.55);
      background:rgba(234,179,8,.10);
      color:rgba(252,211,77,.9);
    }

.hero-side{
  border-radius:22px;
  border:1px solid var(--border-soft);
  background:
    radial-gradient(circle at 0% 0%, rgba(45,212,191,.24), transparent 60%),
    radial-gradient(circle at 100% 100%, rgba(56,189,248,.24), transparent 60%),
    rgba(1,9,15,.92);

  /* ‚¨áÔ∏è D≈ÆLE≈ΩIT√â: nech√°me naho≈ôe m√≠sto pro TV a text d√°me pod ni */
  padding:230px 18px 18px;

  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  gap:10px;

  position:relative;
  overflow:hidden;
  text-align:center;
}

/* TV r√°m ‚Äì men≈°√≠ a jen naho≈ôe (u≈æ nep≈ôekr√Ωv√° text) */
.hero-side::before{
  content:"";
  position:absolute;
  top:12px;
  left:14px;
  right:14px;
  height:200px;

  background:url("/tv-frame.png") center/contain no-repeat;
  opacity:0.9;
  mix-blend-mode:normal;
  filter:
    drop-shadow(0 18px 28px rgba(0,0,0,.85))
    saturate(1.08)
    contrast(1.10);
  pointer-events:none;
}

/* obsah jde nad TV, ale zaƒç√≠n√° a≈æ POD n√≠ d√≠ky padding-top */
.hero-side > *{
  position:relative;
  z-index:1;
}

/* responzivn√≠ doladƒõn√≠ */
@media (max-width:880px){
  .hero-side{
    padding-top:215px;
  }
  .hero-side::before{
    height:185px;
  }
}
@media (max-width:420px){
  .hero-side{
    padding-top:200px;
  }
  .hero-side::before{
    height:170px;
  }
}
    .hero-side::after{
      content:"";
      position:absolute;
      inset:0;
      border-radius:inherit;
      box-shadow:
        inset 0 0 0 1px rgba(148,227,255,.35),
        inset 0 20px 35px rgba(15,23,42,.85),
        inset 0 -18px 30px rgba(0,0,0,.9);
      opacity:0.85;
      pointer-events:none;
    }

    .planBar-label{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:var(--muted2);
    }
    .planBar-main{
      display:flex;
      align-items:center;
      gap:8px;
      margin-top:2px;
      flex-wrap:wrap;
    }
    .planName{
      font-weight:600;
      font-size:13px;
    }
    .planChip{
      padding:4px 10px;
      border-radius:999px;
      font-size:11px;
      border:1px solid rgba(148,227,255,.6);
      background:rgba(15,23,42,.9);
      text-transform:uppercase;
      letter-spacing:.12em;
    }
    .planHint{
      margin-top:6px;
      font-size:11.5px;
      color:var(--muted2);
      line-height:1.6;
    }

    .hero-side-footer{
      margin-top:auto;
      border-top:1px solid rgba(148,227,255,.18);
      padding-top:10px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      font-size:11px;
      color:var(--muted2);
    }

    /* TV grid */
    .section-title{
      margin:24px 0 10px;
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.18em;
      color:var(--muted2);
    }

    .tvGrid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:16px;
    }

    .tv{
      position:relative;
      border-radius:20px;
      border:1px solid var(--border);
      background:var(--card);
      box-shadow:var(--shadow);
      padding:10px 10px 12px;
      display:flex;
      flex-direction:column;
      gap:8px;
      overflow:hidden;
    }

    .tvHd{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      position:relative;
      z-index:2;
    }
    .pill{
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(148,227,255,.45);
      background:rgba(15,23,42,.9);
      font-size:11px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      color:var(--ink2);
    }
    .pill span{opacity:.85}
    .badge{
      min-width:18px;
      padding:2px 7px;
      border-radius:999px;
      font-size:11px;
      background:rgba(15,23,42,.85);
      border:1px solid rgba(148,227,255,.4);
      text-align:center;
    }

    .demoTag{
      position:absolute;
      left:0;
      right:0;
      bottom:-18px;
      margin:auto;
      width:max-content;
      padding:2px 8px;
      border-radius:999px;
      font-size:10px;
      letter-spacing:.12em;
      text-transform:uppercase;
      background:rgba(250,204,21,.96);
      color:#1f2933;
      box-shadow:0 10px 30px rgba(0,0,0,.55);
    }

    .screen{
      position:relative;
      border-radius:12px;
      border:1px solid rgba(148,227,255,.35);
      background:
        radial-gradient(circle at 0% 0%, rgba(45,212,191,.22), transparent 60%),
        radial-gradient(circle at 100% 100%, rgba(59,130,246,.26), transparent 60%),
        rgba(15,23,42,.96);
      padding:10px 10px 9px;
      font-family:"SF Mono","JetBrains Mono","Menlo",monospace;
      font-size:11.5px;
      line-height:1.5;
      color:rgba(241,245,249,.96);
      min-height:92px;
      overflow:hidden;
    }
    .screen pre{
      margin:0;
      white-space:pre-wrap;
    }
    .fadeEdge{
      position:absolute;
      inset:auto 0 0 0;
      height:26px;
      background:linear-gradient(180deg,transparent,rgba(15,23,42,.98));
      pointer-events:none;
    }

    .tvFt{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:10px;
      font-size:11.5px;
      color:var(--muted);
      flex-wrap:wrap;
    }
    .tvFt strong{
      font-size:12px;
      color:var(--ink2);
      display:block;
    }
    .tvFt span{
      display:block;
    }

    .tvFtActions{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      justify-content:flex-end;
    }

    .tv--demo .screen{
      background:
        radial-gradient(circle at 8% 0%, rgba(234,179,8,.22), transparent 60%),
        radial-gradient(circle at 100% 80%, rgba(56,189,248,.20), transparent 60%),
        rgba(15,23,42,.96);
    }

    .tv--bonus{
      border-style:dashed;
      border-color:rgba(45,212,191,.55);
    }
    .tv--bonus.is-locked{
      opacity:.84;
      border-color:rgba(148,163,184,.45);
      background:rgba(15,23,42,.85);
    }

    .tv--bonus .screen{
      font-size:11px;
    }

    .bonusHint{
      font-size:11px;
      color:var(--muted2);
      margin-top:4px;
    }

    .helpText{
      margin:8px 0 0;
      font-size:11.5px;
      color:var(--muted2);
      line-height:1.6;
    }

    /* Buttons */
    .btn{
      border-radius:999px;
      border:1px solid rgba(148,227,255,.45);
      background:rgba(15,23,42,.95);
      color:var(--ink);
      padding:6px 12px;
      font-size:11.5px;
      font-weight:500;
      display:inline-flex;
      align-items:center;
      gap:6px;
      cursor:pointer;
      transition:all .15s ease-out;
      white-space:nowrap;
    }
    .btn:hover{
      background:linear-gradient(135deg,var(--accent-strong),#60a5fa);
      color:#0b1020;
      box-shadow:0 14px 35px rgba(0,0,0,.65);
    }
    .btn--ghost{
      border-color:rgba(148,227,255,.28);
      background:rgba(15,23,42,.55);
    }
    .btn--ghost:hover{
      background:rgba(15,23,42,.95);
      color:var(--ink);
    }
    .btn--danger{
      border-color:rgba(248,113,113,.65);
      background:rgba(127,29,29,.9);
    }
    .btn--danger:hover{
      background:rgba(220,38,38,.95);
      color:#fff;
    }
    .btn--disabled,
    .btn:disabled{
      cursor:default;
      opacity:.45;
      box-shadow:none;
      background:rgba(15,23,42,.6);
    }

    .hint{
      font-size:11px;
      color:var(--muted2);
      margin-top:8px;
    }

    .emptyMsg{
      font-size:11.5px;
      color:var(--muted2);
      margin:4px 0 0;
    }

    /* Queue section */
    .queueSection{
      margin-top:26px;
      padding:16px 14px 14px;
      border-radius:18px;
      border:1px solid rgba(148,227,255,.28);
      background:rgba(3,13,19,.93);
      box-shadow:0 20px 60px rgba(0,0,0,.8);
    }
    .queueHeader{
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    .queueTitle{
      font-size:13px;
      font-weight:500;
    }
    .queueBadge{
      font-size:11px;
      padding:3px 9px;
      border-radius:999px;
      border:1px solid rgba(148,227,255,.45);
      background:rgba(15,23,42,.9);
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    #queueCount{font-weight:600;}

    .queueDesc{
      font-size:11.5px;
      color:var(--muted2);
      margin:0 0 10px;
      line-height:1.6;
    }

    .queueList{
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .queueItem{
      padding:8px 9px;
      border-radius:12px;
      border:1px solid rgba(148,227,255,.24);
      background:rgba(15,23,42,.9);
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      font-size:11.5px;
    }
    .queueMain{
      min-width:0;
    }
    .queueLabel{
      font-weight:500;
      margin-bottom:2px;
    }
    .queueMeta{
      color:var(--muted2);
    }
    .queueActions{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      align-items:center;
      justify-content:flex-end;
    }

    /* Footer */
    footer{
      margin-top:26px;
      padding-top:12px;
      border-top:1px solid rgba(148,227,255,.16);
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      font-size:11px;
      color:var(--muted2);
      justify-content:space-between;
      align-items:center;
    }

    /* Modals */
    .modal-backdrop{
      position:fixed;
      inset:0;
      background:rgba(15,23,42,.72);
      backdrop-filter:blur(18px);
      -webkit-backdrop-filter:blur(18px);
      display:none;
      align-items:center;
      justify-content:center;
      padding:16px;
      z-index:60;
    }
    .modal-backdrop.is-open{display:flex;}

    .modal{
      max-width:520px;
      width:100%;
      border-radius:18px;
      border:1px solid rgba(148,227,255,.4);
      background:rgba(3,13,19,.98);
      box-shadow:0 30px 90px rgba(0,0,0,.9);
      padding:14px 16px 14px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .modal-header{
      display:flex;
      justify-content:space-between;
      gap:8px;
      align-items:flex-start;
      margin-bottom:4px;
    }
    .modal-title{
      font-size:14px;
      font-weight:600;
    }
    .modal-sub{
      font-size:11.5px;
      color:var(--muted2);
      margin-top:2px;
    }
    .modal-close{
      border:none;
      background:transparent;
      color:var(--muted2);
      cursor:pointer;
      padding:2px 4px;
    }
    .modal-body{
      font-size:12px;
      color:var(--ink2);
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .modal-body p{
      margin:0;
    }

    textarea{
      width:100%;
      min-height:120px;
      border-radius:10px;
      border:1px solid rgba(148,227,255,.35);
      background:rgba(15,23,42,.9);
      color:var(--ink);
      font-family:"Poppins",system-ui,sans-serif;
      font-size:12px;
      padding:8px;
      resize:vertical;
    }

    .field{
      display:flex;
      flex-direction:column;
      gap:4px;
      font-size:12px;
    }
    .field label{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.14em;
      color:var(--muted2);
    }
    .field input{
      border-radius:10px;
      border:1px solid rgba(148,227,255,.35);
      background:rgba(15,23,42,.9);
      color:var(--ink);
      font-size:12px;
      padding:7px 8px;
    }

    .modal-footer{
      margin-top:8px;
      padding-top:8px;
      border-top:1px solid rgba(148,227,255,.16);
      display:flex;
      justify-content:flex-end;
      gap:8px;
      flex-wrap:wrap;
    }

    .dangerNote{
      font-size:11px;
      color:var(--danger);
    }

    @media (max-width:640px){
      .hero-side-footer{flex-direction:column;align-items:flex-start;}
      .tvFt{flex-direction:column;align-items:flex-start;}
      .queueItem{flex-direction:column;align-items:flex-start;}
    }
  </style>
</head>
<body>
<div class="page">
  <header>
    <div class="wrap">
      <div class="top">
        <div class="brand">
          <div class="brand-logo" aria-hidden="true"></div>
          <div class="brand-text">
            <b>Proiecta</b>
            <small>Project rooms</small>
          </div>
        </div>
        <nav class="top-nav" aria-label="Navigation">
          <a href="proiecta-en.html">‚Üê Back to workshop</a>
          <a href="praetorium-en.html">‚Üê Praetorium</a>
          <a href="chronica-en.html">‚Üê Chronica</a>
        </nav>
      </div>
    </div>
  </header>

  <main>
    <div class="wrap">

      <section class="hero" aria-label="Overview of project rooms">
        <div class="hero-card">
          <div class="hero-kicker">PROIECTA ‚Ä¢ ROOMS</div>
          <h1>Project rooms ‚Äî TV wall</h1>
          <p class="hero-lead">
            This is where recurring topics become <b>project rooms</b>.
            First demo TV screens, then your own rooms based on your plan,
            and finally a bonus map for big missions.
          </p>
          <p class="hero-note">
            Everything in this demo runs only in your browser ‚Äì locally,
            without saving to a server. You can open and delete rooms,
            overwrite notes and play with the holding shelf.
          </p>
          <div class="demo-pill-row">
            <span class="demo-pill">üîé Three big TVs = <b>demo rooms</b></span>
            <span class="demo-pill">üìÅ ‚ÄûMy rooms‚Äú section = <b>your projects</b></span>
            <span class="demo-pill">üß≠ Bonus: <b>MAP</b> only for PREMIUM (preview here)</span>
          </div>
        </div>

        <aside class="hero-side" aria-label="Active plan in Proiecta">
          <div class="planBar-label">DEMO ‚Ä¢ TARIF</div>
          <div class="planBar-main">
            <span class="planName" id="projPlanName">FREE (demo)</span>
            <span class="planChip" id="projPlanChip" data-plan="free">FREE</span>
          </div>
          <p class="planHint" id="projPlanHint">
            In this demo the limits are simple: FREE ‚Üí 1 own room,
            PLUS ‚Üí 5 rooms, PREMIUM ‚Üí unlimited.
          </p>
          <div class="hero-side-footer">
            <span>Tip: you set the plan in mini-login or in Settings.</span>
          </div>
        </aside>
      </section>

      <!-- 1) Demo screens -->
      <h2 class="section-title">1 ‚Ä¢ Demo project rooms (DEMO)</h2>
      <section class="tvGrid" aria-label="Demo TV rooms">
        <!-- HOME -->
        <article class="tv tv--demo" data-room="demo_domacnost">
          <header class="tvHd">
            <div class="pill">
              <span>üè† HOME</span>
            </div>
            <div class="badge">‚àû</div>
            <span class="demoTag">DEMO</span>
          </header>
          <div class="screen" aria-hidden="true">
            <pre>
MONDAY
  ‚Ä¢ empty bin + mop hallway
  ‚Ä¢ refill cat litter
  ‚Ä¢ check fridge (expirations)

WEDNESDAY
  ‚Ä¢ quick ‚Äûhotel‚Äú tidy-up
  ‚Ä¢ laundry ‚Üí washing machine ‚Üí drying rack
            </pre>
            <div class="fadeEdge"></div>
          </div>
          <footer class="tvFt">
            <div>
              <strong>Room: ‚ÄûHome ‚Äì everyday tasks‚Äú</strong>
              <span>Everyday things that keep coming back ‚Äì cleaning, shopping, cat litter, papers‚Ä¶</span>
              <span class="helpText">
                In the live version this would handle mini-projects for your household.
                Here it‚Äôs just a demo screen.
              </span>
            </div>
          </footer>
        </article>

        <!-- RECIPES -->
        <article class="tv tv--demo" data-room="demo_recepty">
          <header class="tvHd">
            <div class="pill">
              <span>üç≤ RECIPES</span>
            </div>
            <div class="badge">‚àû</div>
            <span class="demoTag">DEMO</span>
          </header>
          <div class="screen" aria-hidden="true">
            <pre>
WINTER RECIPES
  ‚Ä¢ mushroom soup like mum's
  ‚Ä¢ ‚Äûgluten-free‚Äú potato salad
  ‚Ä¢ universal cookie dough

SUMMER IDEAS
  ‚Ä¢ cold soups
  ‚Ä¢ simple salads for lunch boxes
            </pre>
            <div class="fadeEdge"></div>
          </div>
          <footer class="tvFt">
            <div>
              <strong>Room: ‚ÄûRecipes & kitchen ideas‚Äú</strong>
              <span>Everything around cooking, baking and the eternal ‚Äûwhat do we eat today‚Äú.</span>
              <span class="helpText">
                This is only a demo TV ‚Äì to show how a project can live outside the daily chat.
              </span>
            </div>
          </footer>
        </article>

        <!-- BIG PROJECT -->
        <article class="tv tv--demo" data-room="demo_velky">
          <header class="tvHd">
            <div class="pill">
              <span>üåç BIG PROJECT</span>
            </div>
            <div class="badge">‚àû</div>
            <span class="demoTag">DEMO</span>
          </header>
          <div class="screen" aria-hidden="true">
            <pre>
BIG PROJECT
  ‚Ä¢ moving / renovation / bigger life change
  ‚Ä¢ list of steps for months ahead
  ‚Ä¢ checkpoints and dates

HERE YOU WOULD SEE:
  ‚Ä¢ timeline
  ‚Ä¢ notes
  ‚Ä¢ file links
            </pre>
            <div class="fadeEdge"></div>
          </div>
          <footer class="tvFt">
            <div>
              <strong>Room: ‚ÄûBig project‚Äú</strong>
              <span>Example of how a separate wall for a big life event might look.</span>
              <span class="helpText">
                Real projects will appear below in the section <b>My project rooms</b>.
              </span>
            </div>
          </footer>
        </article>
      </section>

      <!-- 2) My project rooms -->
      <h2 class="section-title">2 ‚Ä¢ My project rooms (based on plan)</h2>
      <section class="tvGrid" aria-label="Your project rooms">
        <article class="tv tv--new">
          <header class="tvHd">
            <div class="pill">
              <span>üß∞ YOUR ROOMS</span>
            </div>
          </header>
          <div class="screen">
            <p><b>Your own project rooms</b></p>
            <p>
              Here in the demo you can open real project rooms ‚Äì for example
              ‚ÄûMoving‚Äú, ‚ÄûLanguage course‚Äú or ‚ÄûLiving room renovation‚Äú.
            </p>
            <ul style="margin:6px 0 0 16px;padding:0;font-size:11.5px;line-height:1.4;">
              <li><b>FREE</b>: 1 own project room. No extra ‚Äûplus‚Äú rooms.</li>
              <li><b>PLUS</b>: up to 5 own rooms. Also without extra ‚Äûplus‚Äú rooms.</li>
              <li><b>PREMIUM</b>: one room to start with + possibility of unlimited rooms.</li>
            </ul>
            <p class="hint" id="btnNewRoomHint">
              The plan limit is enforced automatically. Once you hit it, the button will lock.
            </p>
          </div>
          <footer class="tvFt">
            <div>
              <strong>How it works in the demo</strong>
              <span>Each project is a separate room with its own notes space.</span>
            </div>
            <div class="tvFtActions">
              <button class="btn" type="button" id="btnNewRoom">
                ‚ûï Open a new project room
              </button>
            </div>
          </footer>
        </article>

        <div id="customRoomsMount" class="tvGrid" aria-label="List of your project rooms">
          <!-- Filled in by JS -->
        </div>
      </section>

      <!-- 3) PREMIUM bonuses ‚Äì journey map -->
      <h2 class="section-title">3 ‚Ä¢ PREMIUM bonuses ‚Äì journey map</h2>
      <section class="tvGrid" aria-label="PREMIUM bonus rooms">
        <article class="tv tv--bonus" id="tvMap">
          <header class="tvHd">
            <div class="pill">
              <span>üß≠ BONUS: journey map</span>
            </div>
          </header>
          <div class="screen" aria-hidden="true">
            <pre>
JOURNEY MAP (PREVIEW)
  ‚Ä¢ BLOCK 1 ‚Äì goal & route
  ‚Ä¢ BLOCK 2 ‚Äì packing checklist
  ‚Ä¢ BLOCK 3 ‚Äì documents & bookings
  ‚Ä¢ BLOCK 4 ‚Äì little things ‚Äûfor peace of mind‚Äú

IN THE LIVE VERSION:
  ‚Ä¢ holidays, trips, doctors & meetings on one map
  ‚Ä¢ connection with Chronica (dates) and Sigma (reminders)
  ‚Ä¢ export as a personal ‚Äûtravel backpack‚Äú
            </pre>
            <div class="fadeEdge"></div>
          </div>
          <footer class="tvFt">
            <div>
              <strong>Journey map (PREMIUM bonus)</strong>
              <span class="bonusHint tvMapTag">
                Serious things (travels, doctors, meetings) in a playful format. In the live version this will be a key PREMIUM room, here you get a preview.
              </span>
            </div>
            <div class="tvFtActions">
              <button class="btn btn--ghost" type="button" id="btnOpenMap">
                üß≠ Open journey map
              </button>
            </div>
          </footer>
        </article>
      </section>

      <!-- Holding shelf -->
      <section class="queueSection" aria-label="Holding shelf ‚Äì demo">
        <div class="queueHeader">
          <div>
            <div class="queueTitle">Holding shelf ‚Äì queue from the workshop (DEMO)</div>
            <p class="queueDesc">
              Here in the demo you have a few sample items ‚Äûfrom the workshop‚Äú.
              You can <b>turn them into a project room</b> or <b>remove</b> them.
              In the demo you can send items here directly from the Workshop (chat)
              via the <b>‚Äûüì¶ To project‚Äú</b> button on the holding shelf.
            </p>
          </div>
          <div class="queueBadge">
            <span>On the shelf:</span>
            <span id="queueCount">0</span>
          </div>
        </div>
        <div id="queueMount" class="queueList">
          <!-- filled by JS -->
        </div>
      </section>

      <footer>
        <span>Proiecta ‚Ä¢ Project rooms</span>
        <span>DEMO ‚Ä¢ all data stays only in your browser.</span>
      </footer>

    </div>
  </main>
</div>

<!-- Modal: project room detail -->
<div class="modal-backdrop" id="roomModal" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="roomModalTitle">
    <div class="modal-header">
      <div>
        <div class="modal-title" id="roomModalTitle" data-room-title>Project room</div>
        <div class="modal-sub" data-room-purpose>Own project room.</div>
      </div>
      <button class="modal-close" type="button" data-close-room>‚úï</button>
    </div>
    <div class="modal-body">
      <p>
        This is a simple preview of what a writing space inside a project room can look like.
        Everything you write here is stored only in your browser.
      </p>
      <div class="field">
        <label for="roomNotes">Project notes</label>
        <textarea id="roomNotes" placeholder="Project skeleton, milestones, ideas‚Ä¶ go here."></textarea>
      </div>
      <p class="dangerNote">
        Note: in the DEMO version nothing can be exported. Deleting a room cannot be undone.
      </p>
    </div>
    <div class="modal-footer">
      <button class="btn btn--ghost" type="button" data-delete-room>üóë Delete room</button>
      <button class="btn btn--ghost" type="button" data-close-room>Close</button>
      <button class="btn" type="button" data-save-room>üíæ Save notes</button>
    </div>
  </div>
</div>

<!-- Modal: create new room -->
<div class="modal-backdrop" id="createRoomModal" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="createRoomTitle">
    <div class="modal-header">
      <div>
        <div class="modal-title" id="createRoomTitle">New project room</div>
        <div class="modal-sub">
          Give your project a short name and write why it deserves its own room.
        </div>
      </div>
      <button class="modal-close" type="button" onclick="(function(){document.getElementById('createRoomModal').classList.remove('is-open');})();">‚úï</button>
    </div>
    <div class="modal-body">
      <form id="createRoomForm" onsubmit="return false;">
        <div class="field">
          <label for="roomName">Room name</label>
          <input id="roomName" name="roomName" type="text" maxlength="60"
                 placeholder="E.g. Language course, Flat renovation‚Ä¶" required>
        </div>
        <div class="field">
          <label for="roomPurpose">Why this room?</label>
          <input id="roomPurpose" name="roomPurpose" type="text" maxlength="140"
                 placeholder="Briefly: what is this project for?">
        </div>
      </form>
      <p class="hint">
        In the demo, a simple room with a single notes area will be created.
        No data leaves your browser.
      </p>
    </div>
    <div class="modal-footer">
      <button class="btn btn--ghost" type="button"
              onclick="(function(){document.getElementById('createRoomModal').classList.remove('is-open');})();">
        Cancel
      </button>
      <button class="btn" type="button" id="btnCreateRoom">
        ‚úÖ Create room
      </button>
    </div>
  </div>
</div>

<!-- Modal: info about map for non-PREMIUM -->
<div class="modal-backdrop" id="mapInfoModal" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="mapInfoTitle">
    <div class="modal-header">
      <div>
        <div class="modal-title" id="mapInfoTitle">Journey map ‚Äì PREMIUM bonus</div>
        <div class="modal-sub">
          This is a PREMIUM demo room. In the demo you can only see a preview ‚Äì full functions will come in the live version.
        </div>
      </div>
      <button class="modal-close" type="button" data-close-map>‚úï</button>
    </div>
    <div class="modal-body">
      <p>
        In the live version the Journey map will look after holidays, trips, doctors and work meetings, connected with Chronica and Sigma.
      </p>
      <p>
        Here in the demo you can only see what it‚Äôs about. No data goes to any server.
      </p>
    </div>
    <div class="modal-footer">
      <button class="btn btn--ghost" type="button" data-close-map>Close</button>
    </div>
  </div>
</div>

<!-- Modal: delete confirmation -->
<div class="modal-backdrop" id="confirmModal" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
    <div class="modal-header">
      <div class="modal-title" id="confirmTitle">Delete project room?</div>
      <button class="modal-close" type="button" data-cancel-delete>‚úï</button>
    </div>
    <div class="modal-body">
      <p>
        Are you sure you want to delete this project room?
        Everything you have written inside it will be lost in the demo.
      </p>
      <p class="dangerNote">
        In the live version it would be possible to move the room to an archive. Here in the demo deletion is final.
      </p>
    </div>
    <div class="modal-footer">
      <button class="btn btn--ghost" type="button" data-cancel-delete>No, keep it</button>
      <button class="btn btn--danger" type="button" data-confirm-delete>Yes, delete</button>
    </div>
  </div>
</div>

<script>
(() => {
  const PLAN_KEY = 'lm_plan';
  const PLAN_LIMITS = {
    FREE: 1,
    PLUS: 5,
    PREMIUM: Infinity
  };

  const KEY_ROOMS = 'LM_PROIECTA_CUSTOM_ROOMS_V1';
  const KEY_ROOM_TEXTS = 'LM_PROIECTA_ROOM_TEXTS_V1';
  const KEY_QUEUE = "LM_PROIECTA_QUEUE_DEMO_EN";

  let rooms = [];
  let roomTexts = {};
  let queue = [];
  let activeRoomKey = null;
  let deleteRoomKey = null;
  let queueSourceItemIndex = null;

  function getPlan() {
    const raw = (typeof localStorage !== 'undefined')
      ? localStorage.getItem(PLAN_KEY)
      : null;
    const norm = (raw || 'FREE').toUpperCase();
    if (norm === 'PLUS' || norm === 'PREMIUM') return norm;
    return 'FREE';
  }

  function planLabel(plan) {
    if (plan === 'PLUS') return 'PLUS (middle floor)';
    if (plan === 'PREMIUM') return 'PREMIUM (everything unlocked)';
    return 'FREE (basic demo)';
  }

  function saveRooms() {
    if (typeof localStorage === 'undefined') return;
    localStorage.setItem(KEY_ROOMS, JSON.stringify(rooms));
  }

  function saveTexts() {
    if (typeof localStorage === 'undefined') return;
    localStorage.setItem(KEY_ROOM_TEXTS, JSON.stringify(roomTexts));
  }

  function saveQueue() {
    if (typeof localStorage === 'undefined') return;
    localStorage.setItem(KEY_QUEUE, JSON.stringify(queue));
  }

  function renderPlanBar() {
    const plan = getPlan();
    const limit = PLAN_LIMITS[plan] ?? PLAN_LIMITS.FREE;
    const count = rooms.length;

    const nameEl = document.getElementById('projPlanName');
    const chip = document.getElementById('projPlanChip');
    const hint = document.getElementById('projPlanHint');
    const btnNew = document.getElementById('btnNewRoom');
    const newHint = document.getElementById('btnNewRoomHint');

    if (nameEl) nameEl.textContent = planLabel(plan);
    if (chip) {
      chip.textContent = plan;
      chip.setAttribute('data-plan', plan.toLowerCase());
    }

    if (hint) {
      if (plan === 'PREMIUM') {
        hint.textContent = 'PREMIUM in the demo: you can try opening as many project rooms as you like.';
      } else if (plan === 'PLUS') {
        hint.textContent = 'PLUS in the demo: up to 5 own project rooms. Enough for several bigger topics side by side.';
      } else {
        hint.textContent = 'FREE in the demo: one real project room. Enough to see whether this system fits you.';
      }
    }

    if (btnNew && newHint) {
      if (limit !== Infinity && count >= limit) {
        btnNew.disabled = true;
        btnNew.classList.add('btn--disabled');
        newHint.textContent =
          plan === 'FREE'
            ? 'In FREE you have 1 allowed project room in the demo. More would often mean more stress than help.'
            : 'In the PLUS plan the ceiling is 5 project rooms ‚Äì more would be overkill for the demo.';
      } else {
        btnNew.disabled = false;
        btnNew.classList.remove('btn--disabled');
        if (limit === Infinity) {
          newHint.textContent = 'PREMIUM: you can open as many project rooms as you actually need.';
        } else {
          const remaining = limit - count;
          newHint.textContent =
            'You can still add ' + remaining +
            (remaining === 1 ? ' room in your current plan.' : ' rooms in your current plan.');
        }
      }
    }

    // Map gating (PREMIUM bonus)
    const tvMap = document.getElementById('tvMap');
    const mapTag = document.querySelector('.tvMapTag');
    const btnMap = document.getElementById('btnOpenMap');

    if (tvMap && mapTag && btnMap) {
      if (plan === 'PREMIUM') {
        tvMap.classList.remove('is-locked');
        mapTag.textContent = 'PREMIUM preview ‚Äì in the live version this room will be a bonus only for PREMIUM. Here in the demo you get an entry to the map.';
        btnMap.disabled = false;
        btnMap.classList.remove('btn--disabled');
        btnMap.setAttribute('aria-disabled', 'false');
      } else {
        tvMap.classList.add('is-locked');
        mapTag.textContent = 'This room is meant as a PREMIUM bonus. In the demo you see it, but the entry to the map is locked.';
        btnMap.disabled = false; // clickable, JS shows info modal
        btnMap.classList.remove('btn--disabled');
        btnMap.setAttribute('aria-disabled', 'true');
      }
    }
  }

  function renderRooms() {
    const mount = document.getElementById('customRoomsMount');
    if (!mount) return;
    mount.innerHTML = '';

    if (!rooms.length) {
      const p = document.createElement('p');
      p.className = 'emptyMsg';
      p.textContent = 'You don‚Äôt have any own project rooms yet. Start with ‚ÄûOpen a new project room‚Äú.';
      mount.appendChild(p);
      return;
    }

    rooms.forEach(room => {
      const art = document.createElement('article');
      art.className = 'tv tv--custom';
      art.dataset.roomId = room.key;

      const hd = document.createElement('header');
      hd.className = 'tvHd';
      const pill = document.createElement('div');
      pill.className = 'pill';
      pill.innerHTML = '<span>üìÅ ' + (room.name || 'Untitled project') + '</span>';
      hd.appendChild(pill);
      art.appendChild(hd);

      const screen = document.createElement('div');
      screen.className = 'screen';
      const purpose = room.purpose || 'Own project room.';
      const html = [
        '<p><b>' + (room.name || 'Untitled project') + '</b></p>',
        '<p class="muted">' + purpose + '</p>'
      ].join('');
      screen.innerHTML = html + '<div class="fadeEdge"></div>';
      art.appendChild(screen);

      const ft = document.createElement('footer');
      ft.className = 'tvFt';

      const left = document.createElement('div');
      const created = room.createdAt ? new Date(room.createdAt) : new Date();
      left.innerHTML =
        '<strong>Room status</strong>' +
        '<span>Opened for your notes.</span>' +
        '<span class="helpText">Created: ' + created.toLocaleDateString('en-GB') + '</span>';

      const actions = document.createElement('div');
      actions.className = 'tvFtActions';

      const btnOpen = document.createElement('button');
      btnOpen.type = 'button';
      btnOpen.className = 'btn btn--ghost';
      btnOpen.textContent = '‚úèÔ∏è Open project';
      btnOpen.addEventListener('click', () => openRoom(room.key));

      const btnDelete = document.createElement('button');
      btnDelete.type = 'button';
      btnDelete.className = 'btn btn--danger';
      btnDelete.textContent = 'üóë Delete';
      btnDelete.addEventListener('click', () => askDeleteRoom(room.key));

      actions.appendChild(btnOpen);
      actions.appendChild(btnDelete);

      ft.appendChild(left);
      ft.appendChild(actions);

      art.appendChild(ft);
      mount.appendChild(art);
    });
  }

  function renderQueue() {
    const mount = document.getElementById('queueMount');
    const counter = document.getElementById('queueCount');
    if (!mount || !counter) return;

    mount.innerHTML = '';

    if (!queue.length) {
      counter.textContent = '0';
      const p = document.createElement('p');
      p.className = 'emptyMsg';
      p.textContent = 'The holding shelf is empty. In the demo there used to be sample items ‚Äì now it‚Äôs ready for your projects.';
      mount.appendChild(p);
      return;
    }

    counter.textContent = String(queue.length);

    queue.forEach((item, index) => {
      const row = document.createElement('div');
      row.className = 'queueItem';

      const main = document.createElement('div');
      main.className = 'queueMain';

      const label = document.createElement('div');
      label.className = 'queueLabel';
      label.textContent = item.title || item.label || item.topic || ('Item ' + (index + 1));

      const meta = document.createElement('div');
      meta.className = 'queueMeta';
      if (item.createdAt) {
        const d = new Date(item.createdAt);
        meta.textContent = 'Written: ' + d.toLocaleString('en-GB');
      } else {
        meta.textContent = 'Sample item from Proiecta workshop (demo).';
      }

      main.appendChild(label);
      main.appendChild(meta);

      const actions = document.createElement('div');
      actions.className = 'queueActions';

      const btnProject = document.createElement('button');
      btnProject.type = 'button';
      btnProject.className = 'btn btn--ghost';
      btnProject.textContent = '‚û° Create project from item';
      btnProject.addEventListener('click', () => {
        queueSourceItemIndex = index;
        openCreateRoomFromQueue(item);
      });

      const btnDelete = document.createElement('button');
      btnDelete.type = 'button';
      btnDelete.className = 'btn btn--danger';
      btnDelete.textContent = '‚úñ Remove from shelf';
      btnDelete.addEventListener('click', () => {
        queue.splice(index, 1);
        saveQueue();
        renderQueue();
      });

      actions.appendChild(btnProject);
      actions.appendChild(btnDelete);

      row.appendChild(main);
      row.appendChild(actions);
      mount.appendChild(row);
    });
  }

  function openRoom(key) {
    const modal = document.getElementById('roomModal');
    if (!modal) return;
    const room = rooms.find(r => r.key === key);
    if (!room) return;

    activeRoomKey = key;

    const titleEl = modal.querySelector('[data-room-title]');
    const purposeEl = modal.querySelector('[data-room-purpose]');
    const notes = document.getElementById('roomNotes');

    if (titleEl) titleEl.textContent = room.name || 'Untitled project';
    if (purposeEl) purposeEl.textContent = room.purpose || 'Own project room.';
    if (notes) notes.value = roomTexts[key] || '';

    modal.classList.add('is-open');
  }

  function askDeleteRoom(key) {
    deleteRoomKey = key;
    const modal = document.getElementById('confirmModal');
    if (modal) modal.classList.add('is-open');
  }

  function saveRoomNotes() {
    if (!activeRoomKey) return;
    const notes = document.getElementById('roomNotes');
    if (!notes) return;
    roomTexts[activeRoomKey] = notes.value || '';
    saveTexts();
  }

  function createRoomFromForm() {
    const form = document.getElementById('createRoomForm');
    if (!form) return;
    const name = (form.roomName.value || '').trim();
    const purpose = (form.roomPurpose.value || '').trim();
    if (!name) {
      form.roomName.focus();
      return;
    }

    const plan = getPlan();
    const limit = PLAN_LIMITS[plan] ?? PLAN_LIMITS.FREE;
    if (rooms.length >= limit) {
      return;
    }

    const key = 'room_' + Date.now();
    rooms.push({
      key,
      name,
      purpose,
      state: 'open',
      createdAt: Date.now()
    });
    saveRooms();

    if (queueSourceItemIndex !== null && queueSourceItemIndex >= 0 && queueSourceItemIndex < queue.length) {
      queue.splice(queueSourceItemIndex, 1);
      queueSourceItemIndex = null;
      saveQueue();
    }

    const modal = document.getElementById('createRoomModal');
    if (modal) modal.classList.remove('is-open');

    renderRooms();
    renderQueue();
    renderPlanBar();

    openRoom(key);
  }

  function openCreateRoomFromQueue(item) {
    const modal = document.getElementById('createRoomModal');
    const form = document.getElementById('createRoomForm');
    if (!modal || !form) return;

    form.reset();
    form.roomName.value = (item.title || item.label || item.topic || '').toString().slice(0, 60);
    const descSource = item.text || item.body || item.note || '';
    form.roomPurpose.value = descSource
      ? descSource.toString().slice(0, 120)
      : 'Project created from the holding shelf.';

    modal.classList.add('is-open');
  }

  function closeModal(id) {
    const modal = document.getElementById(id);
    if (modal) modal.classList.remove('is-open');
  }

  function init() {
    try {
      const rawRooms = localStorage.getItem(KEY_ROOMS);
      rooms = rawRooms ? JSON.parse(rawRooms) : [];
    } catch (e) {
      rooms = [];
    }

    try {
      const rawTexts = localStorage.getItem(KEY_ROOM_TEXTS);
      roomTexts = rawTexts ? JSON.parse(rawTexts) : {};
    } catch (e) {
      roomTexts = {};
    }

    try {
      const rawQueue = localStorage.getItem(KEY_QUEUE);
      if (rawQueue) {
        queue = JSON.parse(rawQueue) || [];
      } else {
        queue = [
          {
            id: 'demo1',
            title: 'English ‚Äì courses',
            text: 'Frequent workshop topic: learning a language systematically, not just in bursts.'
          },
          {
            id: 'demo2',
            title: 'Partial flat renovation',
            text: 'A big project in small pieces ‚Äì a good candidate for its own room.'
          },
          {
            id: 'demo3',
            title: 'Moving / new nest',
            text: 'Packing lists, offices, papers and paper chaos ‚Äì ideal example for a project map.'
          }
        ];
        saveQueue();
      }
    } catch (e) {
      queue = [];
    }

    renderPlanBar();
    renderRooms();
    renderQueue();

    const btnNewRoom = document.getElementById('btnNewRoom');
    if (btnNewRoom) {
      btnNewRoom.addEventListener('click', () => {
        queueSourceItemIndex = null;
        const modal = document.getElementById('createRoomModal');
        const form = document.getElementById('createRoomForm');
        if (form) form.reset();
        if (modal) modal.classList.add('is-open');
      });
    }

    const btnCreateRoom = document.getElementById('btnCreateRoom');
    if (btnCreateRoom) {
      btnCreateRoom.addEventListener('click', createRoomFromForm);
    }

    const roomModal = document.getElementById('roomModal');
    if (roomModal) {
      roomModal.querySelectorAll('[data-close-room]').forEach(btn => {
        btn.addEventListener('click', () => {
          closeModal('roomModal');
          activeRoomKey = null;
        });
      });
      const btnSave = roomModal.querySelector('[data-save-room]');
      if (btnSave) {
        btnSave.addEventListener('click', () => {
          saveRoomNotes();
          closeModal('roomModal');
        });
      }
      const btnDelete = roomModal.querySelector('[data-delete-room]');
      if (btnDelete) {
        btnDelete.addEventListener('click', () => {
          if (!activeRoomKey) return;
          askDeleteRoom(activeRoomKey);
        });
      }
    }

    const confirmModal = document.getElementById('confirmModal');
    if (confirmModal) {
      const btnCancel = confirmModal.querySelector('[data-cancel-delete]');
      const btnConfirm = confirmModal.querySelector('[data-confirm-delete]');
      if (btnCancel) {
        btnCancel.addEventListener('click', () => {
          deleteRoomKey = null;
          closeModal('confirmModal');
        });
      }
      if (btnConfirm) {
        btnConfirm.addEventListener('click', () => {
          if (!deleteRoomKey) return;
          rooms = rooms.filter(r => r.key !== deleteRoomKey);
          delete roomTexts[deleteRoomKey];
          saveRooms();
          saveTexts();
          renderRooms();
          renderPlanBar();
          closeModal('confirmModal');
          if (activeRoomKey === deleteRoomKey) {
            activeRoomKey = null;
            closeModal('roomModal');
          }
        });
      }
    }

    // Map button ‚Äì PREMIUM only (no system alert)
    const btnMap = document.getElementById('btnOpenMap');
    if (btnMap) {
      btnMap.addEventListener('click', () => {
        const plan = getPlan();
        if (plan !== 'PREMIUM') {
          const info = document.getElementById('mapInfoModal');
          if (info) info.classList.add('is-open');
          return;
        }
        window.location.href = 'map-de.html';
      });
    }

    const mapInfoModal = document.getElementById('mapInfoModal');
    if (mapInfoModal) {
      mapInfoModal.querySelectorAll('[data-close-map]').forEach(btn => {
        btn.addEventListener('click', () => {
          mapInfoModal.classList.remove('is-open');
        });
      });
    }

    document.addEventListener('keydown', (ev) => {
      if (ev.key === 'Escape') {
        closeModal('roomModal');
        closeModal('createRoomModal');
        closeModal('confirmModal');
        closeModal('mapInfoModal');
        activeRoomKey = null;
        deleteRoomKey = null;
      }
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>
</body>
</html>